<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎴 타로 카드 리딩</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 상단 툴바 -->
    <div class="toolbar">
        <button id="muteBtn" class="icon-btn" title="음소거">🔊</button>
        <button id="fullscreenBtn" class="icon-btn" title="전체화면">⛶</button>
        <button id="adminBtn" class="icon-btn" title="관리자" style="margin-left: auto;">⚙️</button>
    </div>

    <!-- 메인 컨테이너 -->
    <div id="app" class="container">
        <!-- 메인 메뉴 화면 -->
        <div id="mainMenu" class="screen active">
            <h1 class="title">🎴 타로 카드 리딩</h1>
            <p class="subtitle">스프레드를 선택하세요</p>

            <div class="spread-grid">
                <button class="spread-btn" data-spread="one_card">
                    <div class="spread-name">1장 리딩</div>
                    <div class="spread-desc">핵심 메시지 / 즉답용</div>
                </button>

                <button class="spread-btn" data-spread="three_card">
                    <div class="spread-name">3장 리딩</div>
                    <div class="spread-desc">시간흐름 / 기본 분석</div>
                </button>

                <button class="spread-btn" data-spread="relationship">
                    <div class="spread-name">5장 리딩</div>
                    <div class="spread-desc">입체적 상황 분석</div>
                </button>

                <button class="spread-btn" data-spread="celtic_cross">
                    <div class="spread-name">7장 리딩</div>
                    <div class="spread-desc">심층 리딩 / 전략 분석</div>
                </button>

                <button class="spread-btn" data-spread="custom">
                    <div class="spread-name">커스텀</div>
                    <div class="spread-desc">1~10장 자유 선택</div>
                </button>
            </div>

            <button id="historyBtn" class="history-btn">📚 히스토리 보기</button>
        </div>

        <!-- 리딩 화면 -->
        <div id="readingScreen" class="screen">
            <h2 id="readingTitle" class="reading-title"></h2>

            <!-- 질문 입력 -->
            <div class="question-container">
                <label for="questionInput" class="question-label">🤔 무엇이 궁금하신가요? (선택사항)</label>
                <input type="text" id="questionInput" class="question-input" placeholder="예: 새로운 일을 시작해야 할까요?, 연애운이 어떨까요?" maxlength="200">
            </div>

            <div id="cardsContainer" class="cards-scroll">
                <div id="cardsWrapper" class="cards-wrapper"></div>
            </div>

            <div class="buttons-row">
                <button id="drawBtn" class="draw-btn">🎴 카드 뽑기</button>
                <button id="backBtn" class="action-btn back-btn">↩ 처음으로</button>
                <button id="resetBtn" class="action-btn reset-btn">🔄 다시 뽑기</button>
                <button id="saveBtn" class="action-btn save-btn">💾 저장</button>
                <button id="aiBtn" class="action-btn ai-btn" disabled>🔮 AI 해설</button>
            </div>

            <div id="drawnCardsList" class="drawn-cards">뽑은 카드: </div>
        </div>

        <!-- 히스토리 화면 -->
        <div id="historyScreen" class="screen">
            <h2 class="reading-title">📚 리딩 히스토리</h2>

            <div id="historyList" class="history-list"></div>

            <div class="buttons-row">
                <button id="historyBackBtn" class="action-btn back-btn">↩ 처음으로</button>
                <button id="clearHistoryBtn" class="action-btn reset-btn">🗑 전체 삭제</button>
            </div>
        </div>
    </div>

    <!-- 커스텀 스프레드 모달 -->
    <div id="customModal" class="modal">
        <div class="modal-content">
            <h3>커스텀 스프레드</h3>
            <p>뽑을 카드 수를 선택하세요:</p>
            <input type="number" id="customCount" min="1" max="10" value="3">
            <div class="modal-buttons">
                <button id="customOkBtn" class="modal-btn ok-btn">확인</button>
                <button id="customCancelBtn" class="modal-btn cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <!-- 히스토리 상세 모달 -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <h3>리딩 상세</h3>
            <div id="detailContent"></div>
            <div class="modal-buttons">
                <button id="detailCloseBtn" class="modal-btn ok-btn">닫기</button>
            </div>
        </div>
    </div>

    <!-- AI 해석 모달 -->
    <div id="aiModal" class="modal">
        <div class="modal-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto;">
            <h3>🔮 AI 타로 해석</h3>
            <div id="aiLoadingText" style="display: none; text-align: center; color: #a78bfa; padding: 20px;">
                <p>AI가 카드를 해석하고 있습니다...</p>
                <p style="font-size: 12px;">잠시만 기다려주세요 (최대 1분)</p>
            </div>
            <div id="aiContent" style="line-height: 1.8; color: #f8fafc; white-space: pre-wrap;"></div>
            <div class="modal-buttons">
                <button id="aiCloseBtn" class="modal-btn ok-btn">닫기</button>
            </div>
        </div>
    </div>

    <!-- AI 비밀번호 입력 모달 -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <h3>🔐 AI 해설 비밀번호</h3>
            <p style="color: #cbd5e1; margin-bottom: 15px;">AI 해설 기능을 사용하려면 비밀번호를 입력하세요.</p>
            <input type="password" id="passwordInput" class="password-input" placeholder="4자리 비밀번호" maxlength="4" pattern="[0-9]*" inputmode="numeric">
            <p style="font-size: 12px; color: #94a3b8; margin-top: 10px;">
                비밀번호가 필요하신 경우<br>
                📞 <a href="sms:010-7433-1947?body=타로 AI 해석 비밀번호가 필요합니다." style="color: #a78bfa; text-decoration: underline; cursor: pointer;">010-7433-1947</a>로 문자 주세요
            </p>
            <div class="modal-buttons">
                <button id="passwordOkBtn" class="modal-btn ok-btn">확인</button>
                <button id="passwordCancelBtn" class="modal-btn cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <!-- 관리자 로그인 모달 -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <h3>⚙️ 관리자 로그인</h3>
            <p style="color: #cbd5e1; margin-bottom: 15px;">관리자 비밀번호를 입력하세요.</p>
            <input type="password" id="adminPasswordInput" class="password-input" placeholder="관리자 비밀번호" maxlength="4" pattern="[0-9]*" inputmode="numeric">
            <div class="modal-buttons">
                <button id="adminLoginOkBtn" class="modal-btn ok-btn">로그인</button>
                <button id="adminLoginCancelBtn" class="modal-btn cancel-btn">취소</button>
            </div>
        </div>
    </div>

    <!-- 관리자 패널 모달 -->
    <div id="adminPanelModal" class="modal">
        <div class="modal-content">
            <h3>⚙️ 관리자 패널</h3>
            <div style="margin: 20px 0;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">현재 AI 비밀번호:</label>
                <div id="currentPassword" style="background: rgba(30, 41, 59, 0.8); padding: 10px; border-radius: 5px; color: #a78bfa; font-weight: bold; text-align: center;">****</div>
            </div>
            <div style="margin: 20px 0;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">새 AI 비밀번호 설정:</label>
                <input type="password" id="newPasswordInput" class="password-input" placeholder="새 4자리 비밀번호" maxlength="4" pattern="[0-9]*" inputmode="numeric">
            </div>
            <div class="modal-buttons">
                <button id="updatePasswordBtn" class="modal-btn ok-btn">비밀번호 변경</button>
                <button id="adminPanelCloseBtn" class="modal-btn cancel-btn">닫기</button>
            </div>
        </div>
    </div>

    <script src="ai.js"></script>
    <script src="app.js"></script>
</body>
</html>
